<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        header { background: #333; color: #fff; padding: 20px; text-align: center; }
        .admin-actions { width: 80%; margin: 20px auto; display: flex; flex-wrap: wrap; gap: 10px; }
        .add-product { width: 100%; margin-bottom: 20px; }
        .add-product input, .add-product textarea, .add-product button { padding: 10px; margin: 5px; width: 100%; box-sizing: border-box; }
        .add-product textarea { height: 60px; }
        .action-btn { background: #007BFF; color: white; padding: 10px; text-decoration: none; border-radius: 5px; border: none; cursor: pointer; }
        .download-btn { background: green; }
        .reset-btn { background: #dc3545; }
        table { width: 80%; margin: 20px auto; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
        th { background-color: #f4f4f4; }
        .product-image { max-width: 60px; max-height: 60px; }
    </style>
</head>
<body>
    <header>
        <h1>Admin Dashboard</h1>
        <a href="index.html" class="action-btn">Back to Shop</a>
    </header>

    <div class="admin-actions">
        <div class="add-product">
            <input type="text" id="productName" placeholder="Product Name" required>
            <input type="number" id="productPrice" placeholder="Product Price" required>
            <input type="text" id="productImage" placeholder="Image URL">
            <textarea id="productDescription" placeholder="Product Description"></textarea>
            <button id="addProductBtn" class="action-btn">Add Product</button>
        </div>

        <button id="downloadJSON" class="action-btn download-btn">Download Products List</button>
        <button id="resetProducts" class="action-btn reset-btn">Reset to Default Products</button>
        <button id="clearProducts" class="action-btn reset-btn">Clear All Products</button>
    </div>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Image</th>
                <th>Name</th>
                <th>Price</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="productTable"></tbody>
    </table>

    <script>
        let products = JSON.parse(localStorage.getItem('products')) || [];

        function renderProducts() {
            const table = document.getElementById('productTable');
            table.innerHTML = '';
            products.forEach((product, index) => {
                table.innerHTML += `
                    <tr>
                        <td>${product.id}</td>
                        <td>${product.image ? `<img src="${product.image}" class="product-image">` : 'No Image'}</td>
                        <td>${product.name}</td>
                        <td>â‚¦${product.price.toLocaleString()}</td>
                        <td><button onclick="deleteProduct(${product.id})">Delete</button></td>
                    </tr>
                `;
            });
        }

        function addProduct() {
            const name = document.getElementById('productName').value;
            const price = parseFloat(document.getElementById('productPrice').value);
            const image = document.getElementById('productImage').value;
            const description = document.getElementById('productDescription').value;

            if(!name || !price) {
                alert('Name and Price are required!');
                return;
            }

            const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
            
            products.push({ 
                id: newId,
                name: name, 
                price: price,
                image: image,
                description: description
            });
            
            localStorage.setItem('products', JSON.stringify(products));
            renderProducts();
            
            // Clear form
            document.getElementById('productName').value = '';
            document.getElementById('productPrice').value = '';
            document.getElementById('productImage').value = '';
            document.getElementById('productDescription').value = '';
        }

        function deleteProduct(id) {
            if(confirm('Are you sure you want to delete this product?')) {
                products = products.filter(product => product.id !== id);
                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
            }
        }

        function downloadProductsJSON() {
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(products, null, 2));
            const dlAnchorElem = document.createElement('a');
            dlAnchorElem.setAttribute("href", dataStr);
            dlAnchorElem.setAttribute("download", "products-list.json");
            dlAnchorElem.click();
        }

        function resetToDefaultProducts() {
            if(confirm('This will replace all current products with default ones. Continue?')) {
                products = [];
                for (let i = 1; i <= 12; i++) {
                    products.push({
                        id: i,
                        name: 'Product ' + i,
                        price: (10000 + i * 500),
                        image: 'assets/images/product' + i + '.jpg',
                        description: 'Product description ' + i
                    });
                }
                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
            }
        }

        function clearAllProducts() {
            if(confirm('This will remove ALL products. Continue?')) {
                products = [];
                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('addProductBtn').addEventListener('click', addProduct);
            document.getElementById('downloadJSON').addEventListener('click', downloadProductsJSON);
            document.getElementById('resetProducts').addEventListener('click', resetToDefaultProducts);
            document.getElementById('clearProducts').addEventListener('click', clearAllProducts);
            renderProducts();
        });
    </script>
</body>
</html>